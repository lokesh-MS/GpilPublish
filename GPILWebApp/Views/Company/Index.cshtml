
@model GPILWebApp.Models.GPIL_COMPANY_MASTER
@{
    ViewBag.Root = "Master";
    ViewBag.Title = "Company Creation";
}


<p>
    <button type="button" role="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#modal-form"> Create New Company </button>
</p>
<h3 class="header smaller lighter blue">Company Creation</h3>

<div class="clearfix">
    <div class="pull-right tableTools-container"></div>
</div>
<div class="table-header">
    Results for "Latest Created Company Details"
</div>
<div class="table-responsive">
    <table id="dynamic-table" class="table  table-striped table-bordered table-hover table-condensed">
        <thead>
            <tr>
                <th>
                    Sno
                </th>
                <th>
                    Company Code
                </th>
                <th>
                    Company Name
                </th>
                <th>
                    Supplier Flag
                </th>
                <th>
                    Status
                </th>
                <th>
                    Company Short Name
                </th>
                <th>
                    Company Group Code
                </th>
                
               

            </tr>
        </thead>
        <tbody>
            @if (ViewBag.CompanyDetails != null)
            {
                foreach (var item in ViewBag.CompanyDetails)
                {

                    <tr>
                        <td>
                            @item.SNO
                        </td>
                        <td>
                            @item.COMPANY_CODE
                        </td>
                        <td>
                            @item.COMPANY_NAME
                        </td>
                        <td>
                            @item.SUPPLIER_FLAG
                        </td>
                        <td>
                            @item.STATUS
                        </td>
                        <td>
                            @item.COMP_SHORT_NAME
                        </td>
                        <td>
                            @item.COMP_GROUP_CODE
                        </td>


                        <td>
                            @*<div class="hidden-sm hidden-xs action-buttons">
                                    <a class="blue" href="#">
                                        <i class="ace-icon fa fa-search-plus bigger-130"></i>
                                    </a>

                                    <a class="green" href="#">
                                        <i class="ace-icon fa fa-pencil bigger-130"></i>
                                    </a>

                                    <a class="red" href="#">
                                        <i class="ace-icon fa fa-trash-o bigger-130"></i>
                                    </a>
                                </div>

                                <div class="hidden-md hidden-lg">
                                    <div class="inline pos-rel">
                                        <button class="btn btn-minier btn-yellow dropdown-toggle" data-toggle="dropdown" data-position="auto">
                                            <i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
                                        </button>

                                       <ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
                                            <li>
                                                <a href="#" class="tooltip-info" data-rel="tooltip"  id="btnView" onclick="id = @item.COMPANY_CODE" title="View">
                                                    <span class="blue">
                                                        <i class="ace-icon fa fa-search-plus bigger-120"></i>
                                                    </span>
                                                </a>
                                            </li>

                                            <li>
                                                <a href="#" class="tooltip-success" id="btnEdit"  data-rel="tooltip" title="Edit">
                                                    <span class="green">
                                                        <i class="ace-icon fa fa-pencil-square-o bigger-120" onclick="Confirm(@item.COMPANY_CODE)"></i>
                                                    </span>
                                                </a>
                                            </li>

                                            <li>
                                                <a href="#" class="tooltip-error" data-rel="tooltip" onclick="confirm(@item.COMPANY_CODE)" title="Delete">
                                                    <span class="red">
                                                        <i class="ace-icon fa fa-trash-o bigger-120"></i>
                                                    </span>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>*@

                            <a href="#" @*id="btnEdit"*@ class="btnEdit tooltip-success" data-rel="tooltip" title="Edit">
                                <span class="green">
                                    <i class="ace-icon fa fa-pencil-square-o bigger-120"></i>
                                </span>
                            </a>

                            @*@Html.ActionLink("Edit", "Edit", new { id = item.COMPANY_CODE }) |
                                @Html.ActionLink("Details", "Details", new { id = item.COMPANY_CODE }) |
                                @Html.ActionLink("Delete", "Delete", new { id = item.COMPANY_CODE })*@
                        </td>
                       
                       


                    </tr>
                }
            }
        </tbody>

    </table>
</div>
<div id="modal-form" class="modal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="blue bigger">Please fill the following form fields</h4>
            </div>

            <div class="modal-body">
                <form id="CompanyDt">
                    <div class="container-fluid">
                        <div>
                            <label>Company Code</label>
                            @Html.TextBoxFor(m => m.COMPANY_CODE, new { @class = "form-control", @id = "txtCompanyCode" })
                            <label>Comany Name</label>
                            @Html.TextBoxFor(m => m.COMPANY_NAME, new { @class = "form-control", @id = "txtCompanyName" })
                            <label class="control-label">Status </label>

                            @Html.DropDownListFor(m => m.STATUS, new List<SelectListItem> {
                    new SelectListItem {Text="Y" ,Value="Y" },
                    new SelectListItem {Text="N" ,Value="N" }
               }, "SELECT STATUS", new { @class = "form-control", @id = "ddlStatus" })
                            @Html.ValidationMessageFor(model => model.STATUS, "", new { @class = "text-danger" })

                            <label class="control-label">Supplier Flag </label>

                            @Html.DropDownListFor(m => m.SUPPLIER_FLAG, new List<SelectListItem> {
                    new SelectListItem {Text="N" ,Value="N" },
                    new SelectListItem {Text="Y" ,Value="Y" }
               }, "SELECT STATUS", new { @class = "form-control", @id = "ddlSupplierFlag" })
                            @Html.ValidationMessageFor(model => model.STATUS, "", new { @class = "text-danger" })

                            <label>Company Short Name</label>
                            @Html.TextBoxFor(m => m.COMP_SHORT_NAME, new { @class = "form-control", @id = "txtComShortName" })

                            <label>Company Group Code</label>
                            @Html.TextBoxFor(m => m.COMP_GROUP_CODE, new { @class = "form-control", @id = "txtComGroup" })
                        </div>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button class="btn btn-sm" id="btnCancel" data-dismiss="modal">
                    <i class="ace-icon fa fa-times"></i>
                    Cancel
                </button>

                <button class="btn btn-sm btn-primary" id="btnSave">
                    <i class="ace-icon fa fa-check"></i>
                    Save
                </button>
            </div>
        </div>
    </div>
</div>

<!-- PAGE CONTENT ENDS -->

<script src="~/assets/js/jquery-2.1.4.min.js"></script>

<script>
    $(document).ready(function () {
        $('#btnSave').click(function () {
            var CompanyDetail = $('#CompanyDt').serialize();
            debugger;
            $.ajax({
                url: '/Company/CompanyCreation',
                type: "POST",
                cache: true,
                data: CompanyDetail,
                success: function () {
                    window.location.href = '/Company/Index';

                }
            })
        })
        $('#btnCancel').click(function () {
            window.location.href = '/Company/Index';
        })

        $('.btnEdit').click(function () {
            var currentTds = $(this).closest("tr").find("td"); // find all td of selected row
            var cell1 = $(currentTds).eq(1).text().trim(); // eq= cell , text = inner text
            var cell2 = $(currentTds).eq(2).text().trim();
            var cell3 = $(currentTds).eq(4).text().trim(); // eq= cell , text = inner text
            var cell4 = $(currentTds).eq(3).text().trim();
            var cell5 = $(currentTds).eq(5).text().trim();
            //var cell6 = $(currentTds).eq(6).text().trim();
            $("#txtVariety").val(cell1);
            $("#txtVarType").val(cell2);
            $("#txtVarName").val(cell3);
            $("#txtVarDesc").val(cell4);
            $("#ddlStatus").val(cell5);
            //$("#txtComGroup").val(cell6);

            $('#modal-form').modal('show');

        })


        //$('.btnEdit').click(function () {
        //    var currentTds = $(this).closest("tr").find("td"); // find all td of selected row
        //    var cell1 = $(currentTds).eq(1).text().trim(); // eq= cell , text = inner text
        //    var cell2 = $(currentTds).eq(2).text().trim();
        //    var cell3 = $(currentTds).eq(4).text().trim(); // eq= cell , text = inner text
        //    var cell4 = $(currentTds).eq(3).text().trim();
        //    var cell5 = $(currentTds).eq(5).text().trim();
        //    var cell6 = $(currentTds).eq(6).text().trim();
        //    $("#txtCompanyCode").val(cell1);
        //    $("#txtCompanyName").val(cell2);
        //    $("#ddlStatus").val(cell3);
        //    $("#ddlSupplierFlag").val(cell4);
        //    $("#txtComShortName").val(cell5);
        //    $("#txtComGroup").val(cell6);
          
        //    $('#modal-form').modal('show');

        //})

    })


</script>
